author: theophile.dev
core-version: 5.3.6
created: 20241201053643562
creator: theophile.dev
description: lightweight plugin packager
list: readme packager
modified: 20241201053643562
modifier: theophile.dev
plugin-type: plugin
stability: STABILITY_1_EXPERIMENTAL
title: $:/plugins/theophile.dev/plugin-maker
type: application/json
version: 0.2.4

{"tiddlers":{"$:/plugins/theophile.dev/plugin-maker/packager":{"text":"\\import [[$:/plugins/theophile.dev/plugin-maker/packager/macros/version]]\n\n\\procedure json-tiddler() \"{{!!title}}\":<$jsontiddler tiddler={{!!title}} exclude=`created creator modified modifier title ${[{!!title}!has[tags]then[tags]]}$`/>\n\n\\procedure json-plugin() {\"tiddlers\":{<$list filter=\"[subfilter<plugin-filter>]\" join=\",\"><<json-tiddler>></$list>}}\n\n\\procedure package-plugin-action()\n<$action-deletetiddler $tiddler=<<plugin-title>>/>\n<$genesis \n  $type=\"$action-createtiddler\"\n  $names=\"\n  =[[$overwrite]]\n  =[[$timestamp]]\n  =[[text]]\n  =[[core-version]]\n  =[[type]]\n  =[<plugin-title>!is[blank]then[$basetitle]]\n  =[<plugin-author>!is[blank]then[author]]\n  =[<plugin-list>!is[blank]then[list]]\n  =[<plugin-version>!is[blank]then[version]]\n  =[<plugin-description>!is[blank]then[description]]\n  =[<plugin-type>!is[blank]then[plugin-type]]\n  =[<plugin-stability>!is[blank]then[stability]]\n  =[<plugin-parent>!is[blank]then[parent-plugin]]\n  =[<plugin-dependents>!is[blank]then[dependents]]\n  \"\n$values=\"\n  =[[yes]]\n  =[[no]]\n  =[<json>]\n  =[<version>]\n  =[[application/json]]\n  =[<plugin-title>!is[blank]]\n  =[<plugin-author>!is[blank]]\n  =[<plugin-list>!is[blank]]\n  =[<plugin-version>!is[blank]]\n  =[<plugin-description>!is[blank]]\n  =[<plugin-type>!is[blank]]\n  =[<plugin-stability>!is[blank]]\n  =[<plugin-parent>!is[blank]]\n  =[<plugin-dependents>!is[blank]]\n\"/>\n<$action-deletetiddler $filter=\"[subfilter<plugin-filter>]\"/>\n\\end\n\n\\procedure edit-info(info,placeholder,options,default,tag:input)\n<$parameters tiddler=`$:/state/plugin-maker/infos/$(plugin-name)$`>\n<label>\n<span>\n<%if [<info>match[name]]:filter[all[tiddlers+shadows]has[plugin-type]] %>\n<$tiddler tiddler=<<tiddler>> >\n<$select field=\"set-plugin-name\" default={{!!set-plugin-name}} >\n<option disabled value={{!!set-plugin-name}} style=\"display:none\">Name</option>\n<optgroup label='Plugins'>\n<$list filter=\"[has[plugin-type]author{$:/status/UserName}]:map[trim[$:/plugins/]trim[$:/themes/]trim[$:/languages/]split[/]last[]]\" variable=\"name\">\n<$genesis $type=\"option\" value={{{ [<name>match{!!set-plugin-name}then[]else<name>] }}} $names=\"[<name>match{!!set-plugin-name}then[disabled title]enlist-input[]]\" $values=\"=true =[[Plugin selected]]\">\n<<name>>\n</$genesis>\n</$list>\n</optgroup>\n</$select>\n</$tiddler>\n<%else%>\n<$text text={{{ [<info>sentencecase[]] }}}/>\n<%endif%>\n</span>\n<%if [<options>!is[blank]] %>\n<$select tiddler=<<tiddler>> field=`set-plugin-$(info)$` default=<<default>> ><$list filter=<<options>> ><option value={{{ [{!!title}split[:]first[]] }}}>{{{ [{!!title}split[:]last[]] }}}</option></$list></$select>\n<%elseif  [<info>match[version]] %>\n<span><$tiddler tiddler=<<tiddler>> ><<setVersionFieldButtons>></$tiddler></span>\n<%else%>\n<$edit tiddler=<<tiddler>> field=`set-plugin-$(info)$` placeholder=<<placeholder>> default=<<default>> tag=<<tag>> />\n<%endif%>\n</label>\n</$parameters>\n\\end\n\n\\function set.value(value,default:\"\") [<value>!is[blank]]:else[<default>] :filter[!is[blank]]\n\n<form class=\"edit-info\">\n<$transclude $variable=\"edit-info\" info=\"name\" tiddler=\"$:/state/plugin-maker/infos\" placeholder=\"Plugin name\"/>\n<$let plugin-name={{{ [set.value{$:/state/plugin-maker/infos!!set-plugin-name},[Plugin name]] }}} >\n<$transclude $variable=\"edit-info\" info=\"author\" placeholder=\"Author\" default={{$:/status/UserName}}/>\n<$let plugin-author={{{ [set.value{!!set-plugin-author},{$:/status/UserName}] }}} plugin-title=`$:/plugins/$(plugin-author)$/$(plugin-name)$` >\n<$transclude $variable=\"edit-info\" info=\"description\" placeholder=\"Plugin description\"/>\n<$transclude $variable=\"edit-info\" info=\"version\" placeholder=\"0.0.1\" />\n<$transclude $variable=\"edit-info\" info=\"stability\" default=\"STABILITY_1_EXPERIMENTAL\" options=\"[[STABILITY_0_DEPRECATED:deprecated]] [[STABILITY_1_EXPERIMENTAL:experimental]] [[STABILITY_2_STABLE:stable]] [[STABILITY_3_LEGACY:legacy]]\" />\n<$transclude $variable=\"edit-info\" info=\"type\" options=\"plugin theme language\" default=\"plugin\"/>\n<$transclude $variable=\"edit-info\" info=\"list\" default=\"readme\" placeholder=\"Plugin list\"/>\n<$transclude $variable=\"edit-info\" info=\"parent\" placeholder=\"Plugin parent\"/>\n<$transclude $variable=\"edit-info\" info=\"dependents\" placeholder=\"Plugin dependents\"/>\n<$transclude $variable=\"edit-info\" info=\"filter\" default=\"[<plugin-title>plugintiddlers[]] [prefix<plugin-title>!<plugin-title>]\" placeholder=\"Filter the tiddlers to package\" tag=\"textarea\"/>\n</$let>\n</$let>\n</form>\n<$let \nplugin-name={{{ [set.value{$:/state/plugin-maker/infos!!set-plugin-name},[Plugin name]] }}}>\n<$tiddler tiddler=`$:/state/plugin-maker/infos/$(plugin-name)$`>\n<$let\nplugin-author={{{ [set.value{!!set-plugin-author},{$:/status/UserName}] }}}\nplugin-title=`$:/plugins/$(plugin-author)$/$(plugin-name)$`\nplugin-type={{{ [set.value{!!set-plugin-type},[plugin]] }}}\nplugin-version={{{ [set.value{!!set-plugin-version},[0.0.1]] }}}\nplugin-list={{{ [set.value{!!set-plugin-list},[readme]] }}}\nplugin-description={{{ [set.value{!!set-plugin-description},[Plugin packaged with plugin-maker]] }}}\nplugin-parent={{{ [set.value{!!set-plugin-parent}] }}}\nplugin-dependents={{{ [set.value{!!set-plugin-dependents}] }}}\nplugin-stability={{{ [set.value{!!set-plugin-stability},[STABILITY_1_EXPERIMENTAL]] }}}\nplugin-filter=`[<plugin-title>plugintiddlers[]] [all[tiddlers+shadows]prefix<plugin-title>!<plugin-title>] ${[set.value{!!set-plugin-filter}]}$ +[sort[title]]`\n>\n<$wikify name=\"json\" text=<<json-plugin>> >\n\n<$link to=<<plugin-title>>/>\n\n<ul>\n<$list filter=\"[subfilter<plugin-filter>]\">\n<li><$link><%if [{!!title}prefix<plugin-title>]%>..<$text text={{{ [{!!title}removeprefix<plugin-title>] }}}/><%else%><$text text={{!!title}}/><%endif%></$link></li>\n</$list>\n</ul>\n\n<$button actions=<<package-plugin-action>> >\n<$text text=`${[<plugin-title>get[title]then[Update]else[Package]]}$ $(plugin-name)$`/>\n</$button>\n\n<%if [<plugin-title>get[title]]%>\n\n<details>\n<summary>Diff</summary>\n<$diff-text source={{{ [<plugin-title>get[text]] }}} dest=<<json>> />\n</details>\n\n<%endif%>\n\n</$wikify>\n</$let>\n</$tiddler>\n</$let>","set-plugin-name":"nav","set-plugin-version":"0.0.2","set-plugin-type":"plugin","set-plugin-list":"readme","filter":"[prefix[$:/plugins/theophile.dev/plugin-maker/]]","set-plugin-author":"theophile.dev","set-plugin-description":"navigable titles","set-parent-plugin":"$:/plugins/theophile.dev/tiddlyhostpluginlibrary","plugin-filter":"[<plugin-title>plugintiddlers[]] [prefix<plugin-title>!<plugin-title>]","set-plugin-filter":"[<plugin-title>plugintiddlers[]] [prefix<plugin-title>!<plugin-title>]","set-plugin-stability":"STABILITY_1_EXPERIMENTAL","set-plugin-parent":"","version":"0.0.1","version-0.0.1":""},"$:/plugins/theophile.dev/plugin-maker/packager/macros/version":{"text":"\\procedure setVersionField()\n<$let increment={{{ [<modifier>match[ctrl]then[-1]else[1]] }}} >\n<$action-setfield set-plugin-version={{{ [<dom-data-version>split[.]] :map[<dom-data-nth>subtract[1]match<index>then<increment>else[0]add{!!title}compare:number:gteq[0]else[0]]+[join[.]] }}}/>\n</$let>\n\\end setVersionField\n\n\\procedure setVersionFieldButton()\n<$genesis \n$type=\"button\" \ntype=\"button\"\ndata-version=<<version>>\ndata-nth=<<nth>>\ntitle={{{ \"Breaking changes\" \"Backward compatible changes\" \"Bug fixes\" +[nth<nth>] }}}\n><<versionPart>></$genesis>\n\\end setVersionFieldButton\n\n\\procedure setVersionFieldButtons()\n<$let version={{{ [{!!set-plugin-version}!is[blank]else[0.0.0]] }}} >\n<$eventcatcher selector=\"button\" $click=<<setVersionField>> tag=\"div\">\n<$list filter=\"[<version>split[.]]\" variable=\"versionPart\" counter=\"nth\"><<setVersionFieldButton>></$list>\n</$eventcatcher>\n<$edit class=\"tc-edit-texteditor\" tag=\"textarea\" field=`set-plugin-version-$(version)$` placeholder=`$(version)$ release notes`/>\n</$let>\n\\end setVersionFieldButtons\n\n\\procedure editVersionFieldButton()\n\\procedure editVersionField()\n<%if [<modifier>match[ctrl]] %>\n<$action-deletefield $field=<<field>> />\n<%else%>\n<$action-setfield version=<<version>> />\n<%endif%>\n\\end editVersionField\n<$let version={{{ [<field>removeprefix[version-]] }}} >\n<$button tooltip=\"click to edit, ctrl+click to delete\" actions=<<editVersionField>> > <<version>></$button> - <$text text={{{ [{!!title}get<field>] }}}/>\n</$let>\n\\end editVersionFieldButton\n\n\\procedure versionHistory()\n<ul>\n<$list filter=\"[{!!title}fields[]prefix[version-]]\" variable=\"field\"><li><<editVersionFieldButton>></li></$list>\n</ul>\n\\end","code-body":"yes"},"$:/plugins/theophile.dev/plugin-maker/packager/style":{"text":".edit-info {\n  --_border: solid 1px;\n  display: grid;\n  grid-template-columns: min-content 1fr;\n  border: var(--_border);\n  label {\n    grid-column: 1/-1;\n    display: grid;\n    grid-template-columns: subgrid;\n    &:not(:last-child) {\n      border-bottom: var(--_border);\n    }\n    span {\n      padding: 2px;\n      border-right: var(--_border);\n      align-content: center;\n    }\n    input,\n    textarea {\n      resize: vertical;\n      &.tc-edit-texteditor{\n        margin:0;\n      }\n    }\n  }\n}","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/theophile.dev/plugin-maker/readme":{"text":"Simple tool to create plugins aiming to be as small as possible."}}}